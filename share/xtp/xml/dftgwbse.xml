<?xml version="1.0"?>
<options>
  <!-- xtp_tools -e dftgwbse options.xml -->
  <dftgwbse help="Compute electronic excitations using GW-BSE">
    <optimize help="Perform a molecular geometry optimization" default="false" choices="bool"/>
    <dftpackage link="dftpackage.xml"/>
    <use_mpsfile help="check for MPS file with external multipoles for embedding" default="false" choices="bool"/>
    <mpsfile help="MPS file to read from if use_mpsfile"/>
    <use_guess help="Use a precomputed wave function" default="false" choices="bool"/>
    <guess help="File to read the wave function if the use guess flag is set to true"/>
    <gwbse_engine>
      <tasks help="task to compute" default="input,dft,parse,gwbse" choices="[input,dft,parse,gwbse]"/>
      <gwbse link="gwbse.xml"/>
      <redirect_logger help="Redirect Logger" default="false" choices="bool"/>
    </gwbse_engine>
    <geometry_optimization help="geometry optimization options">
      <state help="initial state to optimize for" default="s1"/>
      <maxiter help="Maximum iteration number" default="50" choices="int+"/>
      <trajectory_file help="File to write trajectory" default="optimisation.trj"/>
      <statetracker default="OPTIONAL" link="statetracker.xml"/>
      <convergence help="Convergence criteria for geometry optimization">
        <energy help="Energy error tolerance" unit="Hartree" default="1.e-6" choices="float+"/>
        <RMSForce help="Force Root mean square error tolerance" unit="Hartree/Bohr" default="3.e-5" choices="float+"/>
        <MaxForce help="Maximum force Convergence criteria" unit="Hartree/Bohr" default="1.e-4" choices="float+"/>
        <RMSStep help="Step Root mean square error tolerance" unit="Bohr" default="6.e-4" choices="float+"/>
        <MaxStep help="convergence criteria for geometry optimisation" unit="Bohr" default="1.e-3" choices="float+"/>
      </convergence>
      <optimizer help="optimiser method">
        <method default="BFGS-TRM" choices="BFGS-TRM"/>
        <trust help="initial trustregion" unit="Angstrom" default="0.01" choices="float+"/>
      </optimizer>
      <forces>
        <method help="finite differences method, central or forward" default="central" choices="central forward"/>
        <CoMforce_removal help="Remove total force on molecule" default="true" choices="bool"/>
        <displacement help="finite difference displacement" unit="Angstrom" default="0.001" choices="float+"/>
      </forces>
    </geometry_optimization>
  </dftgwbse>
</options>
